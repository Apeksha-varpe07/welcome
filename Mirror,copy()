#include <stdio.h>
#include <stdlib.h>

#define MAX_SIZE 100

struct node {
    int data;
    struct node *left;
    struct node *right;
};

struct node* createNode(int data) {
    struct node* newNode = (struct node*) malloc(sizeof(struct node));
    newNode->data = data;
    newNode->left = NULL;
    newNode->right = NULL;

    return newNode;
}
struct node* copy(struct node* root) {
    if (root == NULL) {
        return NULL;
    }

    struct node* newRoot = createNode(root->data);
    struct node* queue[MAX_SIZE];
    int front = 0, rear = 0;

    queue[rear++] = root;
    while (front < rear) {
        struct node* currNode = queue[front++];
        struct node* newCurrNode = NULL;

        if (currNode->left != NULL) {
            newCurrNode = createNode(currNode->left->data);
            queue[rear++] = currNode->left;
        }

        if (currNode->right != NULL) {
            if (newCurrNode == NULL) {
                newCurrNode = createNode(currNode->right->data);
                queue[rear++] = currNode->right;
            } else {
                newCurrNode->right = createNode(currNode->right->data);
                queue[rear++] = currNode->right;
            }
        }

        if (newCurrNode != NULL) {
            if (currNode->left != NULL) {
                newCurrNode->left = createNode(currNode->left->data);
            }
            if (newRoot == NULL) {
                newRoot = newCurrNode;
            } else {
                newCurrNode->left = newRoot;
                newRoot = newCurrNode;
            }
        }
    }

    return newRoot;
}

struct node* mirror(struct node* root) {
    if (root == NULL) {
        return NULL;
    }

    struct node* newRoot = createNode(root->data);
    struct node* queue[MAX_SIZE];
    int front = 0, rear = 0;

    queue[rear++] = root;
    while (front < rear) {
        struct node* currNode = queue[front++];
        struct node* newCurrNode = NULL;

        if (currNode->left != NULL) {
            newCurrNode = createNode(currNode->left->data);
            queue[rear++] = currNode->left;
        }

        if (currNode->right != NULL) {
            if (newCurrNode == NULL) {
                newCurrNode = createNode(currNode->right->data);
                queue[rear++] = currNode->right;
            } else {
                newCurrNode->left = createNode(currNode->right->data);
                queue[rear++] = currNode->right;
            }
        }

        if (newCurrNode != NULL) {
            if (currNode->left != NULL) {
                newCurrNode->right = createNode(currNode->left->data);
            }
            if (newRoot == NULL) {
                newRoot = newCurrNode;
            } else {
                newCurrNode->right = newRoot;
                newRoot = newCurrNode;
            }
        }
    }

    return newRoot;
}

void printTree(struct node* root) {
    if (root == NULL) {
        return;
    }

    printf("%d ", root->data);
    printTree(root->left);
    printTree(root->right);
}

int main() {
    struct node* root = createNode(1);
    root->left = createNode(2);
    root->right = createNode(3);
    root->left->left = createNode(4);
    root->left->right = createNode(5);
    root->right->left = createNode(6);
    root->right->right = createNode(7);

    struct node* copyRoot = copy(root);
    printf("Original tree: ");
    printTree(root);
    printf("\nCopy of tree: ");
    printTree(copyRoot);

    struct node* mirrorRoot = mirror(root);
    printf("\nMirror of tree: ");
    printTree(mirrorRoot);

    return 0;
}
